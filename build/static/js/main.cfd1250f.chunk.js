(this["webpackJsonpmy-superstore-typescript"]=this["webpackJsonpmy-superstore-typescript"]||[]).push([[0],{102:function(e,t,c){},103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){},108:function(e,t,c){},109:function(e,t,c){},110:function(e,t,c){},111:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),s=c(37),r=c.n(s),i=(c(47),c(48),c(25)),o=c(5),l=function(e){return{type:"SET_USER",payload:e}},j=function(e){return{type:"SET_CART",payload:e}},u=function(e,t){return{type:"ADD_TO_CART",payload:{item:e,quantity:t}}},d=function(e,t){switch(t.type){case"INIT_STATE":return{cart:[],user:null};case"SET_USER":return Object(o.a)(Object(o.a)({},e),{},{user:t.payload});case"SET_CART":return Object(o.a)(Object(o.a)({},e),{},{cart:t.payload});case"ADD_TO_CART":var c=e.cart.find((function(e){return e.id===t.payload.item.id}));if(c){var n=Object(o.a)(Object(o.a)({},c),{},{quantity:c.quantity+1,totalPrice:(c.quantity+1)*c.price}),a=e.cart.filter((function(e){return e.id!==c.id}));return Object(o.a)(Object(o.a)({},e),{},{cart:[].concat(Object(i.a)(a),[n])})}var s=Object(o.a)(Object(o.a)({},t.payload.item),{},{quantity:t.payload.quantity,totalPrice:t.payload.quantity*t.payload.item.price});return Object(o.a)(Object(o.a)({},e),{},{cart:[].concat(Object(i.a)(e.cart),[s])});case"INCREASE_ITEM_IN_CART":var r,l=t.payload,j=e.cart.find((function(e){return e.id===l.id})),u=e.cart.findIndex((function(e){return e.id===l.id}));j&&(r=Object(o.a)(Object(o.a)({},j),{},{quantity:j.quantity+1,totalPrice:j.totalPrice+j.price}));var d=e.cart.map((function(e,t){return t===u?r:e}));return Object(o.a)(Object(o.a)({},e),{},{cart:d});case"DECREASE_ITEM_IN_CART":var m,b=t.payload,O=e.cart.find((function(e){return e.id===b.id})),h=e.cart.findIndex((function(e){return e.id===b.id}));O&&(m=Object(o.a)(Object(o.a)({},O),{},{quantity:O.quantity-1,totalPrice:O.totalPrice-O.price}));var x=e.cart.map((function(e,t){return t===h?m:e}));return Object(o.a)(Object(o.a)({},e),{},{cart:x});case"REMOVE_ITEM_FROM_CART":var f=t.payload,p=e.cart.filter((function(e){return e.id!==f}));return console.log(p),Object(o.a)(Object(o.a)({},e),{},{cart:p});default:return e}},m=c(3),b=c(1),O={user:null,cart:[]},h=Object(n.createContext)([O,function(){return O}]),x=function(e){var t=e.children,c=Object(n.useReducer)(d,O),a=Object(m.a)(c,2),s=a[0],r=a[1];return Object(b.jsx)(h.Provider,{value:[s,r],children:t})},f=function(){return Object(n.useContext)(h)},p=(c(71),c(9)),v=c(7),g=c(40),N=(c(72),function(e){var t=e.navName,c=e.linkTo,n=e.sign_in,a=f(),s=Object(m.a)(a,1)[0].cart,r="nav-item";if(n&&(r+=" sign_in"),"Cart"===t){var i=s&&0!==s.length?Object(b.jsx)("div",{className:"icon-tag",children:s.length}):null;return Object(b.jsx)("li",{className:"".concat(r," "),children:Object(b.jsxs)(p.c,{id:"cart",to:c,exact:!0,className:"icon-block",activeClassName:"active",children:[t,"  ",Object(b.jsx)(g.a,{size:25}),i]})})}return"Admin"===t?Object(b.jsx)("li",{className:"".concat(r," admin"),children:Object(b.jsx)(p.c,{to:c,exact:!0,className:"",children:t})}):Object(b.jsx)("li",{className:"".concat(r," "),children:Object(b.jsx)(p.c,{to:c,exact:!0,className:"",activeClassName:"active",children:t})})}),y=(c(78),function(){var e=f(),t=Object(m.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),r=Object(m.a)(s,2),i=r[0],o=r[1],l=c.user,j=Object(v.g)(),u=i?"nav_items active":"nav_items",d=null===l?Object(b.jsx)(N,{sign_in:!0,navName:"Sign In",linkTo:"/login"}):Object(b.jsxs)("div",{className:"px-4 m-0 text-white",children:[Object(b.jsx)("div",{children:l.name}),Object(b.jsx)("div",{className:"logout",onClick:function(){a({type:"INIT_STATE",payload:[]}),window.localStorage.removeItem("loggedUser"),j.push("/login")},children:"logout"})]});return Object(b.jsxs)("nav",{className:"navBar",children:[Object(b.jsx)("div",{className:"logo",children:Object(b.jsx)(p.b,{to:"/",children:"Super Store"})}),Object(b.jsxs)("ul",{className:u,children:[Object(b.jsx)(N,{navName:"Home",linkTo:"/"}),Object(b.jsx)(N,{navName:"Deals",linkTo:"/deals"}),Object(b.jsx)(N,{navName:"Cart",linkTo:"/cart"}),l&&"admin"===l.role?Object(b.jsx)(N,{navName:"Admin",linkTo:"/admin"}):null,d]}),Object(b.jsxs)("div",{className:"burger",onClick:function(){console.log("click toggle button"),console.log(i),o(!i)},children:[Object(b.jsx)("div",{className:"line1"}),Object(b.jsx)("div",{className:"line2"}),Object(b.jsx)("div",{className:"line3"})]})]})}),w=(c(79),c(4)),k=c.n(w),C=c(6),S=function(){return Object(b.jsxs)("svg",{width:"16px",height:"16px",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("title",{children:"star-full"}),Object(b.jsx)("desc",{children:"Created with Sketch."}),Object(b.jsx)("g",{id:"star-full",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(b.jsx)("path",{d:"M31.4885496,3.11613455 L22.2702274,21.5136178 L1.67622723,24.4611015 L16.5775637,38.7678904 L13.0578457,58.980827 L31.4885496,49.4369407 L49.9192536,58.980827 L46.3995355,38.7678904 L61.300872,24.4611015 L40.7068718,21.5136178 L31.4885496,3.11613455 Z",id:"Star",stroke:"#E7B811",fill:"#F6C415"})})]})},E=function(){return Object(b.jsxs)("svg",{width:"16px",height:"16px",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("title",{children:"Artboard"}),Object(b.jsx)("desc",{children:"Created with Sketch."}),Object(b.jsxs)("g",{id:"Artboard",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[Object(b.jsx)("polygon",{id:"Star",fill:"#F6C415",points:"32 50.2781955 13.1908719 60.0180394 16.7830957 39.3887189 1.56619148 24.7789531 22.595436 21.7691758 32 3"}),Object(b.jsx)("path",{d:"M32,4.11613455 L22.9252589,22.2270655 L2.65231591,25.1285984 L17.3213333,39.2123374 L13.8564583,59.1103226 L32,49.7151362 L50.1435417,59.1103226 L46.6786667,39.2123374 L61.3476841,25.1285984 L41.0747411,22.2270655 L32,4.11613455 Z",id:"Star-Copy-4",stroke:"#E7B811"})]})]})},_=function(){return Object(b.jsxs)("svg",{width:"16px",height:"16px",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("title",{children:"star-empty"}),Object(b.jsx)("desc",{children:"Created with Sketch."}),Object(b.jsx)("g",{id:"star-empty",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(b.jsx)("path",{d:"M32,4.11613455 L22.9252589,22.2270655 L2.65231591,25.1285984 L17.3213333,39.2123374 L13.8564583,59.1103226 L32,49.7151362 L50.1435417,59.1103226 L46.6786667,39.2123374 L61.3476841,25.1285984 L41.0747411,22.2270655 L32,4.11613455 Z",id:"Star-Copy-4",stroke:"#E7B811"})})]})},I=function(e){for(var t=e.average_rating,c=[],n=Math.trunc(t),a=t%1>0?1:0,s=5-(n+a),r=0;r<n;r++)c.push(Object(b.jsx)(S,{},"full_star_".concat(r)));for(var i=0;i<a;i++)c.push(Object(b.jsx)(E,{},"half_star_".concat(i)));for(var o=0;o<s;o++)c.push(Object(b.jsx)(_,{},"empty_star_".concat(o)));return Object(b.jsx)(b.Fragment,{children:c})},T=(c(81),function(e){var t=e.imgUrl,c=e.price,n=e.name,a=e.average_rating,s=e.isOnSale,r=e.item_id,i=e.description,o=e.stockCount,l=e.toCart;return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"center pt-3",children:Object(b.jsx)("img",{className:"card-img-top img",src:t,alt:n})}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("p",{className:"mb-0",children:Object(b.jsx)(p.b,{to:"item/".concat(r),children:n})}),Object(b.jsx)(I,{average_rating:a}),Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"card-text",children:Object(b.jsxs)("strong",{children:["$",c,s&&Object(b.jsx)("span",{className:"onSale ml-2",children:"On Sale"})]})})})]}),Object(b.jsxs)("div",{className:"my-3 d-flex justify-content-between",children:[Object(b.jsx)(p.b,{to:"item/".concat(r),className:"btn btn-primary center",children:"View Item"}),Object(b.jsx)("button",{className:"btn center add_cart",onClick:function(){l({imageUrl:t,description:i,price:c,name:n,avgRating:a,isOnSale:s,id:r,stockCount:o})},children:"Add to Chart"})]})]})}),L=(c(82),function(e){var t=e.items,c=e.toCart;return Object(b.jsx)("div",{className:"container mt-5",children:Object(b.jsx)("div",{className:"row",children:t.map((function(e){return Object(b.jsx)("div",{className:"col-md-4 col-sm-6 my-3",children:Object(b.jsx)(T,{name:e.name,imgUrl:e.imageUrl,description:e.description,price:e.price,average_rating:e.avgRating,isOnSale:e.isOnSale,item_id:e.id,stockCount:e.stockCount,toCart:c})},e.id)}))})})}),P=c(41),A=(c(83),function(e){var t=e.handleSearch,c=Object(n.useState)(""),a=Object(m.a)(c,2),s=a[0],r=a[1],i=function(e){console.log("Try to prevent default"),e.preventDefault(),console.log("Tried to prevent default"),t(s)};return Object(b.jsx)("div",{className:"row py-2 d-flex justify-content-center search",children:Object(b.jsx)("div",{className:"searchArea",children:Object(b.jsxs)("form",{onSubmit:i,className:"input-group md-form form-sm form-2 pl-0",children:[Object(b.jsx)("input",{className:"form-control my-0 py-1 amber-border",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(e){var c=e.target;r(c.value),""===c.value&&t("")}}),Object(b.jsx)("div",{className:"input-group-append",children:Object(b.jsx)("span",{className:"input-group-text amber lighten-3  bg-warning",id:"basic-text1",children:Object(b.jsx)("i",{className:"fas fa-search text-grey","aria-hidden":"true",onClick:i,children:Object(b.jsx)(P.a,{})})})})]})})})}),R=c(14),q=c.n(R),F={PAGE_SIZE:6},M=function(){var e=Object(C.a)(k.a.mark((function e(t){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.post("".concat("/","item/upload"),t);case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(C.a)(k.a.mark((function e(t){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat("/","item/").concat(t));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(C.a)(k.a.mark((function e(t){var c,n,a,s,r,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.from,n=t.sortField,a=t.sortDir,s=t.isOnSale,r=t.q,e.next=3,q.a.get("".concat("/","item/list"),{params:{from:c,size:F.PAGE_SIZE,sortField:n,sortDir:a,isOnSale:s,q:r}});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U={fetchItemList:B,getItem:D},z=(c(102),c(103),Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"text-primary icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})})),W=Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"text-primary icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})}),Z=function(e){var t=e.currentPage,c=e.allPages,n=e.nextPage,a=e.prevPage,s=e.firstPage,r=e.lastPage;return Object(b.jsxs)("div",{className:"pagination-button text-center mb-4 mt-4",children:[Object(b.jsx)("button",{className:"mx-3",onClick:function(){return s()},disabled:1===t,children:"First"}),Object(b.jsxs)("button",{onClick:function(){return a()},disabled:1===t,children:[" ",W," "]}),Object(b.jsxs)("span",{className:"mx-3",children:[c?t:null," - ",c||null]}),Object(b.jsxs)("button",{onClick:function(){return n()},disabled:t===c,children:[" ",z," "]}),Object(b.jsx)("button",{className:"mx-3",onClick:function(){return r()},disabled:t===c,children:"Last"})]})},J=F.PAGE_SIZE,G=function(e){var t=e.updatePage,c=e.page,n=e.totalItems,a=n?Math.ceil(n/J):0;return Object(b.jsx)(Z,{currentPage:c,allPages:a,nextPage:function(){t(c+1)},prevPage:function(){t(c-1)},firstPage:function(){t(1)},lastPage:function(){t(a)}})},H=function(){var e=f(),t=Object(m.a)(e,2),c=(t[0],t[1]),a=Object(n.useState)([]),s=Object(m.a)(a,2),r=s[0],i=s[1],o=Object(n.useState)(!0),l=Object(m.a)(o,2),j=l[0],d=l[1],O=Object(n.useState)(),h=Object(m.a)(O,2),x=h[0],p=h[1],v=Object(n.useState)(1),g=Object(m.a)(v,2),N=g[0],y=g[1],w=Object(n.useState)(""),S=Object(m.a)(w,2),E=S[0],_=S[1];Object(n.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={from:(N-1)*F.PAGE_SIZE,q:E,isOnSale:!1},e.next=4,U.fetchItemList(t);case 4:c=e.sent,p(c.total),i(c.items),d(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[N,E]);var I=function(){var e=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===t?(_(""),y(1)):(y(1),_(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)(A,{handleSearch:I}),0!==r.length||j?Object(b.jsx)(L,{items:r,toCart:function(e){c(u(e,1))}}):Object(b.jsx)("h3",{className:"no-item",children:"No items matched your search"}),";",Object(b.jsx)(G,{updatePage:function(e){y(e)},page:N,totalItems:x})]})},V=(c(104),function(){var e=f(),t=Object(m.a)(e,2),c=(t[0],t[1]),a=Object(n.useState)([]),s=Object(m.a)(a,2),r=s[0],i=s[1],o=Object(n.useState)(!0),l=Object(m.a)(o,2),j=l[0],d=l[1],O=Object(n.useState)(null),h=Object(m.a)(O,2),x=h[0],p=h[1],v=Object(n.useState)(1),g=Object(m.a)(v,2),N=g[0],y=g[1],w=Object(n.useState)(""),S=Object(m.a)(w,2),E=S[0],_=S[1];Object(n.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={isOnSale:!0,from:(N-1)*F.PAGE_SIZE,q:E},e.next=4,U.fetchItemList(t);case 4:c=e.sent,i(c.items),p(c.total),d(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[N,E]);var I=function(){var e=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(""===t?"":t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=!1===j&&0===r.length?Object(b.jsx)("div",{className:"noDeals",children:Object(b.jsx)("h1",{children:"No Deals available at the moment"})}):Object(b.jsx)(L,{toCart:function(e){c(u(e,1))},items:r});return Object(b.jsxs)("div",{children:[Object(b.jsx)(A,{handleSearch:I}),Object(b.jsx)("div",{className:"row",children:0!==r.length||j?T:Object(b.jsx)("h3",{className:"no-item",children:"No Deals matched your search"})}),Object(b.jsx)(G,{updatePage:function(e){y(e)},page:N,totalItems:x})]})}),$=(c(105),function(e){var t=e.item,c=e.notify,n=e.increaseItem,a=e.decreaseItem,s=e.remove,r=t.stockCount<1?"bg-danger ":"bg-success ",i=Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"text-danger icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),o=Object(b.jsx)("svg",{onClick:function(){t.quantity===t.stockCount?c({message:"Insufficient stock!",class:"alert alert-danger"}):(t.quantity<=t.stockCount&&t.quantity>0&&c(void 0),n(t))},xmlns:"http://www.w3.org/2000/svg",className:"text-success icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})}),l=Object(b.jsx)("svg",{onClick:function(){t.quantity<=1?c({message:"Invalid number of items",class:"alert alert-danger"}):(t.quantity<=t.stockCount&&t.quantity>0&&c(void 0),a(t))},xmlns:"http://www.w3.org/2000/svg",className:"text-success icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z"})});return Object(b.jsx)("li",{children:Object(b.jsxs)("div",{className:"row cart-border row-sm-4",children:[Object(b.jsx)("div",{className:"col-xs-4 d-flex justify-content-center col-sm-4 col-md-4 col-lg-3 px-sm-3",children:Object(b.jsx)("img",{className:"card-img-top img center cart-img",src:t.imageUrl,alt:t.name})}),Object(b.jsxs)("div",{className:"col-xs-4 col-sm-4 col-md-4 col-lg-4 px-sm-3",children:[Object(b.jsx)("div",{className:"row py-2",children:Object(b.jsx)("strong",{children:t.name})}),Object(b.jsxs)("div",{className:"",children:["Available in stock: ",Object(b.jsx)("span",{className:r+"px-3 text-white",children:t.stockCount})]}),Object(b.jsxs)("div",{className:"row py-2",children:[Object(b.jsxs)("div",{className:"",children:["Quantity: ",Object(b.jsx)("span",{className:"quantity text-white py-1",children:t.quantity})]}),Object(b.jsx)("div",{className:"mt-2",children:Object(b.jsx)("span",{className:"button text-danger",onClick:function(){return s(t.id)},children:i})})]}),Object(b.jsxs)("div",{children:[l,o]})]}),Object(b.jsx)("div",{className:"col-xs-4 col-sm-4 col-md-4 col-lg-5 px-sm-3",children:Object(b.jsx)("div",{className:"d-flex justify-content-end",children:Object(b.jsx)("h4",{children:Object(b.jsxs)("strong",{children:["$",t.totalPrice.toFixed(2)]})})})})]})})}),Q=function(e){var t=e.message;return Object(b.jsx)("div",{className:"text-center",children:t})},Y=null,K=function(){var e=Object(C.a)(k.a.mark((function e(t){var c,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{authorization:"bearer ".concat(t)}},console.log("config",c),e.next=4,q.a.get("".concat("/","cart"),c);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(C.a)(k.a.mark((function e(t){var c,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{authorization:"bearer ".concat(Y)}},console.log("config",c),e.next=4,q.a.post("".concat("/","cart/"),t,c);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee={setToken:function(e){Y=e},saveCart:X,getCart:K},te=(c(106),function(){var e=f(),t=Object(m.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(),r=Object(m.a)(s,2),i=r[0],o=r[1],l=c.cart;Object(n.useEffect)((function(){0===l.length&&j({message:"Cart empty for now",class:"alert alert-danger"})}),[a,l]);var j=function(e){o(e),setTimeout((function(){o(void 0)}),5e3)},u=Object(v.g)(),d=function(e){a(function(e){return{type:"INCREASE_ITEM_IN_CART",payload:e}}(e))},O=function(e){a(function(e){return{type:"DECREASE_ITEM_IN_CART",payload:e}}(e))},h=function(e){console.log("Remove item from cart"),a(function(e){return{type:"REMOVE_ITEM_FROM_CART",payload:e}}(e))},x=function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.saveCart(l);case 2:204===e.sent.status&&j({message:"Cart saved succesfully",class:"alert alert-success"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=l.map((function(e){return e.totalPrice})),g=0!==p.length?p.reduce((function(e,t){return e+t})):null;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col",children:[i?Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-sm-6 offset-sm-3 ".concat(i.class),role:"alert",children:Object(b.jsx)(Q,{message:i.message})})}):null,Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col py-5 mx-4",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-sm-8 offset-sm-2 p-0",children:Object(b.jsx)("h1",{className:"py-5",children:"Shopping Cart"})})}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-xs-8 offset-xs-2 col-sm-10 offset-sm-1 col-md-8 offset-md-2",children:Object(b.jsx)("ul",{className:"list-group cart-list",children:l.map((function(e){return Object(b.jsx)($,{item:e,notify:j,increaseItem:d,decreaseItem:O,remove:h},e.id)}))})})}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-xs-8 offset-xs-2 col-sm-10 offset-sm-1 col-md-8 offset-md-2",children:Object(b.jsxs)("div",{className:"row py-5",children:[Object(b.jsx)("div",{className:"col",children:Object(b.jsx)("button",{className:"btn btn-lg checkout-btn",onClick:function(){a({type:"INIT_STATE",payload:[]}),u.push("/thankyou")},children:Object(b.jsx)("strong",{children:"Checkout"})})}),Object(b.jsx)("div",{className:"col",children:Object(b.jsx)("button",{className:"btn btn-lg saveCart-btn",onClick:x,children:Object(b.jsx)("strong",{children:"Save cart"})})}),Object(b.jsx)("div",{className:"col d-flex justify-content-end ",children:Object(b.jsx)("h4",{children:Object(b.jsxs)("strong",{children:["Total: $",g]})})})]})})})]})})]})})}),ce=(c(107),function(){var e=f(),t=Object(m.a)(e,2),c=t[0],s=t[1],r=a.a.useState(),i=Object(m.a)(r,2),l=i[0],j=i[1],d=Object(n.useState)(1),O=Object(m.a)(d,2),h=O[0],x=O[1],p=Object(n.useState)(""),g=Object(m.a)(p,2),N=g[0],y=g[1],w=Object(n.useState)(!1),S=Object(m.a)(w,2),E=S[0],_=S[1],T=c.cart.find((function(e){return e.id===(null===l||void 0===l?void 0:l.id)})),L=Object(v.h)();Object(n.useEffect)((function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.getItem(L.id);case 2:t=e.sent,j(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[L.id]),Object(n.useEffect)((function(){l&&l.stockCount<1&&y("Item no longer in stock")}),[]);var P=l&&l.stockCount<1?"bg-danger ":"bg-success ",A=0===(null===l||void 0===l?void 0:l.stockCount),R=0===(null===l||void 0===l?void 0:l.stockCount)?"disable-btn":"enable-btn";return Object(b.jsxs)("div",{className:"col",children:[Object(b.jsx)("div",{className:"row text-center",children:E&&Object(b.jsx)("div",{className:"col-md-6 offset-md-3 alert alert-success",role:"alert",children:Object(b.jsx)(Q,{message:"Added ".concat(h," ").concat(null===l||void 0===l?void 0:l.name," to Cart")})})}),Object(b.jsxs)("div",{className:"row item description",children:[Object(b.jsx)("div",{className:"col-sm image_wrapper d-flex justify-content-end",children:Object(b.jsx)("img",{className:"float-sm-right",src:null===l||void 0===l?void 0:l.imageUrl,alt:null===l||void 0===l?void 0:l.name})}),Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:null===l||void 0===l?void 0:l.name})}),Object(b.jsx)("div",{children:Object(b.jsx)(I,{average_rating:l?l.avgRating:0})}),Object(b.jsx)("hr",{className:"line"}),Object(b.jsx)("p",{children:null===l||void 0===l?void 0:l.description}),Object(b.jsx)("p",{className:"my-3",children:Object(b.jsxs)("strong",{children:["$",null===l||void 0===l?void 0:l.price]})}),Object(b.jsxs)("div",{className:"my-3",children:["Available in stock: ",Object(b.jsx)("span",{className:P+"px-3 py-1 text-white",children:null===l||void 0===l?void 0:l.stockCount})]}),Object(b.jsxs)("div",{children:["Quantity: ",Object(b.jsx)("span",{className:"quantity text-white",children:h})]}),Object(b.jsxs)("div",{className:"my-3 d-flex justify-content-between control-btn",children:[Object(b.jsx)("button",{className:"bg-primary",onClick:function(){h<=1?y("Invalid number of items"):(l&&h<=l.stockCount&&h>0&&y(""),x(h-1))},children:"-"}),Object(b.jsx)("button",{className:"bg-primary",onClick:function(){h===(null===l||void 0===l?void 0:l.stockCount)?y("Insufficient stock!"):(l&&h<=(null===l||void 0===l?void 0:l.stockCount)&&h>0&&y(""),x(h+1))},children:"+"})]}),Object(b.jsx)("div",{className:"my-3",children:Object(b.jsx)("button",{className:R,onClick:function(){l&&(s(u(l,h)),_(!0),j(Object(o.a)(Object(o.a)({},l),{},{stockCount:(null===l||void 0===l?void 0:l.stockCount)-h})),setTimeout((function(){_(!1)}),5e3))},disabled:A,children:"Add to Cart"})}),N&&Object(b.jsx)("div",{className:"alert alert-danger",role:"alert",children:Object(b.jsx)(Q,{message:N})}),T&&Object(b.jsx)("div",{className:"available_in_cart",children:"1 of this item? is currently in your cart"})]})]})]})}),ne=function(){var e,t=Object(n.useState)(""),c=Object(m.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(m.a)(r,2),o=i[0],l=i[1],j=Object(n.useState)(0),u=Object(m.a)(j,2),d=u[0],O=u[1],h=Object(n.useState)(!1),x=Object(m.a)(h,2),f=x[0],p=x[1],v=Object(n.useState)(0),g=Object(m.a)(v,2),N=g[0],y=g[1],w=Object(n.useState)(0),S=Object(m.a)(w,2),E=S[0],_=S[1],I=Object(n.useState)(),T=Object(m.a)(I,2),L=T[0],P=T[1],A=Object(n.useState)(),R=Object(m.a)(A,2),q=R[0],F=R[1],D=document.getElementById("isOnSale");D&&(e=D.checked),e&&p(!0);var B=function(){var e=Object(C.a)(k.a.mark((function e(t){var c,n,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t.preventDefault(),c={name:a,description:o,avgRating:d,isOnSale:f,stockCount:N,price:E,image:L},n=new FormData,c)n.append(s,a);return e.next=6,M(n);case 6:F({message:"Item saved successfully",class:"alert alert-success"}),setTimeout((function(){F(void 0)}),5e3);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"container",children:[q?Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-sm-6 offset-sm-3 ".concat(q.class),role:"alert",children:Object(b.jsx)(Q,{message:q.message})})}):null,Object(b.jsx)("h2",{className:"my-5 text-center",children:"Here is the admin to manage products"}),Object(b.jsx)("div",{children:Object(b.jsx)("h4",{children:"Create New Product"})}),Object(b.jsxs)("form",{className:"p-5 border border-primary",id:"form",children:[Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Product Name"}),Object(b.jsx)("div",{className:"col-sm-6",children:Object(b.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Name the item here",onChange:function(e){return s(e.target.value)}})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"description",className:"col-sm-2 col-form-label",children:"Description"}),Object(b.jsx)("div",{className:"col-sm-6",children:Object(b.jsx)("input",{type:"text",className:"form-control",id:"description",placeholder:"Describe the item",onChange:function(e){return l(e.target.value)}})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"rating",className:"col-sm-2 col-form-label",children:"Rating"}),Object(b.jsx)("div",{className:"col-sm-6",children:Object(b.jsx)("input",{type:"number",id:"rating",name:"rating",min:"1",max:"5",onChange:function(e){return O(Number(e.target.value))}})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"isOnSale",className:"col-sm-2 col-form-label",children:"On Sale"}),Object(b.jsx)("div",{className:"col-sm-6",children:Object(b.jsx)("input",{type:"checkbox",id:"isOnSale",name:"onSale"})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"stockCount",className:"col-sm-2 col-form-label",children:"Stock count"}),Object(b.jsx)("div",{className:"col-sm-6",children:Object(b.jsx)("input",{type:"number",id:"stockCount",name:"stockCount",min:"1",max:"2000",onChange:function(e){return y(Number(e.target.value))}})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"price",className:"col-sm-2 col-form-label",children:"Price"}),Object(b.jsx)("div",{className:"col-sm-6",children:Object(b.jsx)("input",{type:"number",id:"price",name:"stockCount",onChange:function(e){return _(Number(e.target.value))}})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"image",className:"col-sm-2 col-form-label",children:"Price"}),Object(b.jsx)("div",{className:"col-sm-6",children:Object(b.jsx)("input",{type:"file",id:"image",name:"item",onChange:function(e){return P(e.target.files[0])}})})]}),Object(b.jsx)("div",{className:"form-group row",children:Object(b.jsx)("div",{className:"col-sm-10 offset-sm-2",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){return B},children:"Submit"})})})]})]})},ae=(c(108),function(){return Object(b.jsxs)("div",{className:"container thankyou-message",children:[Object(b.jsx)("div",{className:"row center",children:Object(b.jsx)("h1",{children:"Thank you for your purchase!"})}),Object(b.jsx)("div",{className:"row center message",children:"Your order will be on its way shortly. In the mean time, please feel free to continue shopping!"}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)(p.b,{className:"center return-home",to:"/",children:"Return to Home"})})]})}),se=function(){var e=Object(C.a)(k.a.mark((function e(t){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.post("".concat("/","login"),t);case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(C.a)(k.a.mark((function e(t){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.post("".concat("/","login"),t);case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie={login:se,signup:re},oe=(c(109),function(){var e=f(),t=Object(m.a)(e,2),c=(t[0],t[1]),a=Object(n.useState)(),s=Object(m.a)(a,2),r=s[0],i=s[1],o=Object(n.useState)(""),u=Object(m.a)(o,2),d=u[0],O=u[1],h=Object(n.useState)(""),x=Object(m.a)(h,2),g=x[0],N=x[1],y=Object(n.useState)(!1),w=Object(m.a)(y,2),S=w[0],E=w[1],_=Object(v.g)(),I=function(e){i(e),setTimeout((function(){i(void 0)}),5e3)},T=function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ie.login({email:d,password:g});case 4:return n=e.sent,ee.setToken(n.token),e.next=8,ee.getCart(n.token);case 8:a=e.sent,n.cart=a,S&&window.localStorage.setItem("loggedUser",JSON.stringify(n)),c(l(n)),c(j(a)),O(""),N(""),_.push("/"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),I({message:"Invalid username or password",class:"alert alert-danger"});case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"container signin",children:[r?Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-sm-6 offset-sm-3 ".concat(r.class),role:"alert",children:Object(b.jsx)(Q,{message:r.message})})}):null,Object(b.jsxs)("form",{className:"form-signin",onSubmit:T,children:[Object(b.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Please sign in"}),Object(b.jsx)("label",{htmlFor:"inputEmail",className:"sr-only mb-2",children:"Email address"}),Object(b.jsx)("input",{type:"email",id:"inputEmail",className:"form-control mb-3",placeholder:"Email address",required:!0,autoFocus:!0,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"inputPassword",className:"sr-only mb-2",children:"Password"}),Object(b.jsx)("input",{type:"password",id:"inputPassword",className:"form-control mb-3",placeholder:"Password",required:!0,onChange:function(e){return N(e.target.value)}}),Object(b.jsx)("div",{className:"checkbox mb-3",children:Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"checkbox",value:"remember-me",onChange:function(){E(!0)}})," Remember me"]})}),Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)("button",{id:"login-button",className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Sign in"})})]}),Object(b.jsx)("div",{className:"m-3",children:Object(b.jsxs)("small",{children:['Don"t yet have an account ? ',Object(b.jsx)(p.b,{to:"/signup",children:"Sign up"})," here"]})})]})}),le=c(42),je=["component","user"],ue=function(e){var t=e.component,c=e.user,n=Object(le.a)(e,je);return c?"admin"===c.role?Object(b.jsx)(v.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return Object(b.jsx)(t,Object(o.a)(Object(o.a)({},n),e))}})):Object(b.jsx)(v.a,{to:{pathname:"/unauthorized"}}):Object(b.jsx)(v.a,{to:{pathname:"/login"}})},de=function(){return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("h2",{className:"mx-auto",children:"Only administrators are authorized to come here"})})},me=(c(110),function(){var e=f(),t=Object(m.a)(e,2),c=(t[0],t[1]),a=Object(n.useState)(),s=Object(m.a)(a,2),r=s[0],i=s[1],o=Object(n.useState)(""),j=Object(m.a)(o,2),u=j[0],d=j[1],O=Object(n.useState)(""),h=Object(m.a)(O,2),x=h[0],p=h[1],g=Object(n.useState)(""),N=Object(m.a)(g,2),y=N[0],w=N[1],S=Object(n.useState)(""),E=Object(m.a)(S,2),_=E[0],I=E[1],T=Object(n.useState)(!1),L=Object(m.a)(T,2),P=L[0],A=(L[1],Object(v.g)()),R=function(e){i(e),setTimeout((function(){i(void 0)}),5e3)},q=function(){var e=Object(C.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ie.signup({name:x,username:y,email:u,password:_});case 4:n=e.sent,P&&window.localStorage.setItem("loggedUser",JSON.stringify(n)),console.log(n),c(l(n)),d(""),I(""),I(""),A.push("/"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),R({message:e.t0.message,class:"alert alert-danger"});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[r?Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-sm-6 offset-sm-3 ".concat(r.class),role:"alert",children:Object(b.jsx)(Q,{message:r.message})})}):null,Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsxs)("form",{className:"signup",onSubmit:q,children:[Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)("h3",{children:"Create Account"})}),Object(b.jsxs)("div",{className:"form-row d-flex my-2",children:[Object(b.jsxs)("div",{className:"form-group col-md-6 mx-2",children:[Object(b.jsx)("label",{htmlFor:"inputEmail4",children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Name",onChange:function(e){return p(e.target.value)}})]}),Object(b.jsxs)("div",{className:"form-group col-md-6 mx-2",children:[Object(b.jsx)("label",{htmlFor:"inputPassword4",children:"Username"}),Object(b.jsx)("input",{type:"password",className:"form-control",id:"username",placeholder:"username",onChange:function(e){return w(e.target.value)}})]})]}),Object(b.jsxs)("div",{className:"form-row d-flex my-2",children:[Object(b.jsxs)("div",{className:"form-group col-md-6 mx-2",children:[Object(b.jsx)("label",{htmlFor:"inputEmail4",children:"Email"}),Object(b.jsx)("input",{type:"email",className:"form-control",id:"inputEmail4",placeholder:"Email",onChange:function(e){return d(e.target.value)}})]}),Object(b.jsxs)("div",{className:"form-group col-md-6 mx-2",children:[Object(b.jsx)("label",{htmlFor:"inputPassword4",children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",id:"inputPassword",placeholder:"Password",onChange:function(e){return I(e.target.value)}})]})]}),Object(b.jsx)("div",{className:"d-flex justify-content-center m-2",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create Account"})})]})})]})}),be=function(){var e=f(),t=Object(m.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);a(l(JSON.parse(e))),a(j(JSON.parse(e).cart)),ee.setToken(t.token)}}),[]),Object(b.jsx)("div",{children:Object(b.jsxs)(p.a,{children:[Object(b.jsx)(y,{}),Object(b.jsxs)(v.d,{children:[Object(b.jsx)(v.b,{exact:!0,path:"/",children:Object(b.jsx)(H,{})}),Object(b.jsx)(v.b,{path:"/deals",children:Object(b.jsx)(V,{})}),Object(b.jsx)(v.b,{path:"/cart",children:Object(b.jsx)(te,{})}),Object(b.jsx)(v.b,{path:"/item/:id",children:Object(b.jsx)(ce,{})}),Object(b.jsx)(ue,{path:"/admin",user:c.user,component:ne}),Object(b.jsx)(v.b,{path:"/thankyou",children:Object(b.jsx)(ae,{})}),Object(b.jsx)(v.b,{path:"/login",children:Object(b.jsx)(oe,{})}),Object(b.jsx)(v.b,{path:"/signup",children:Object(b.jsx)(me,{})}),Object(b.jsx)(v.b,{path:"/unauthorized",children:Object(b.jsx)(de,{})})]})]})})};r.a.render(Object(b.jsx)(x,{children:Object(b.jsx)(be,{})}),document.getElementById("root"))},71:function(e,t,c){},72:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){}},[[111,1,2]]]);
//# sourceMappingURL=main.cfd1250f.chunk.js.map